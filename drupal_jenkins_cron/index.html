<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=1024, user-scalable=yes">

	<title>Introcuction to Jenkins from a Drupal Perspective</title>

	<!-- Required stylesheet -->
	<link rel="stylesheet" href="core/deck.core.css">

	<!-- Extension CSS files go here. Remove or add as needed. -->
	<link rel="stylesheet" href="extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="extensions/status/deck.status.css">
	<link rel="stylesheet" href="extensions/hash/deck.hash.css">
	<link rel="stylesheet" href="extensions/scale/deck.scale.css">

	<!-- Style theme. More available in /themes/style/ or create your own. -->
	<link rel="stylesheet" href="themes/style/web-2.0.css">

	<!-- Transition theme. More available in /themes/transition/ or create your own. -->
	<link rel="stylesheet" href="themes/transition/horizontal-slide.css">

	<!-- Required Modernizr file -->
	<script src="modernizr.custom.js"></script>

	<!-- Custom styling for this presentation -->
	<style type="text/css">
		#drush-command .code-display {
			background-color: black;
			padding: .5em 1em;
			margin-bottom: 1em;
		}
		#drush-command .code-display p {
			color: white;
			padding: 0;
			margin: .25em 0;
		}
		#step1 .code-display p.lvl1 {
			margin-left: 2em;
		}
	</style>
</head>
<body class="deck-container on-slide-markup on-slide-2">

<!-- Begin slides. Just make elements with a class of slide. -->
<!-- !!!Slide notes are in assets folder!!! -->

<section id="introduction" class="slide">
	<h1>An Introduction to Jenkins from a Drupal Perspective</h1>
	<p>Brandon Williams (crazysix)</p>
</section>

<section id="disclaimer" class="slide deck-child-current deck-before">
	<h2>Disclaimer</h2>
	<p class="slide deck-current">This is a noob's explaination of how new tools could be used to improve current methods.</p>
	<h3 class="slide deck-next">What does this mean?</h3>
	<ul class="slide deck-after">
		<li>The methods covered in this presentation are not being represented as best practices.</li>
		<li>Get the conversation started!</li>
		<li><a href="http://www.communitywiki.org/cw/DoOcracy" target="_blank">Do-ocracy</a></li>
	</ul>
</section>

<section id="problem" class="slide deck-child-current deck-before">
	<h2>What are the issues?</h2>
	<h3 class="slide deck-current">Drupal cron is a good area to focus on.</h3>
	<ul>
		<li class="slide deck-after">Reference: <a href="https://drupal.org/node/553430" target="_blank">https://drupal.org/node/553430</a></li>
		<li class="slide deck-after">It dies silently to the untrained eye.</li>
		<li class="slide deck-after">It can be a massive task, integrated with various modules and running those jobs in one bulk process.</li>
		<li class="slide deck-after">All module cron jobs combined should not exceed the 240s timeout limit.</li>
		<li class="slide deck-after">PHP memory can be an issue.</li>
		<li class="slide deck-after">When cron jobs fail multiple sources may need to be accessed to understand what happened (watchdog, logs, etc.).</li>
		<li class="slide deck-after">Troubleshooting could require disabling individual modules in an attempt to identify the issue.</li>
	</ul>
</section>

<section id="solution" class="slide deck-child-current deck-before">
	<h2>What can be done?</h2>
	<h3 class="slide deck-current">Create a solution that will execute specific cron jobs, notify maintainers of issues, document output during the process, and be easily accessible. While there are likely many solutions for this particular issue, we believe...</h3>
	<p class="slide deck-after">Drush</p>
	<p class="slide deck-after"> + Jenkins</p>
	<img src="assets/images/awesomesauce-drupal.png" class="slide deck-after" />
</section>

<section id="drush" class="slide deck-child-current deck-before">
	<h2>What is Drush?</h2>
	<div class="slide deck-current">
		<p>Drush is a shell-based application used to manage Drupal sites.</p>
		<p>Stop! Learn Drush now!</p>
		<p><a href="https://github.com/drush-ops/drush" target="_blank">https://github.com/drush-ops/drush</a></p>
		<p><a href="http://drush.ws/" target="_blank">http://drush.ws/</a></p>
	</div>
</section>

<section id="jenkins" class="slide deck-child-current deck-before">
	<h2>What is Jenkins?</h2>
	<div class="slide deck-current">
		<p>Jenkins is an award-winning application that monitors executions of repeated jobs, such as building a software project or jobs run by cron. Among those things, current Jenkins focuses on the following two jobs:</p>
		<ul>
			<li>Building/testing software projects continuously, just like CruiseControl or DamageControl. In a nutshell, Jenkins provides an easy-to-use so-called continuous integration system, making it easier for developers to integrate changes to the project, and making it easier for users to obtain a fresh build. The automated, continuous build increases the productivity.</li>
			<li>Monitoring executions of externally-run jobs, such as cron jobs and procmail jobs, even those that are run on a remote machine. For example, with cron, all you receive is regular e-mails that capture the output, and it is up to you to look at them diligently and notice when it broke. Jenkins keeps those outputs and makes it easy for you to notice when something is wrong.</li>
		</ul>
		<p>https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins</p>
	</div>
	<h3 class="slide deck-current">In short...</h3>
	<p class="slide deck-current">Jenkins is a dumb butler. It only executes your existing jobs, records output, and appropriate actions as dictacted by you.</p>
</section>

<section id="plan" class="slide deck-child-current deck-before">
	<h2>The Plan</h2>
	<h3 class="slide deck-current">Use Drush to run cron jobs.</h3>
	<ul>
		<li class="slide deck-after">Specify the jobs to run</li>
	</ul>
	<h3 class="slide deck-current">Use Jenkins to execute the jobs, allowing:</h3>
	<ul>
		<li class="slide deck-after">Specify the drush commands to run.</li>
		<li class="slide deck-after">Notify via email, ping in irc, etc.</li>
		<li class="slide deck-after">Track a builds (job output)</li>
	</ul>
</section>

<section id="assumptions" class="slide deck-child-current deck-before">
	<h2>Assumptions</h2>
	<ul>
		<li class="slide deck-current">Jenkins is setup</li>
		<li class="slide deck-after">Jenkins can communicate with the machine</li>
	</ul>
	<p class="slide deck-after">There are many ways to accomplish this, but the details are beyond the scope of this presentation.</p>
</section>

<section id="drush-command" class="slide deck-child-current deck-before">
	<h2>Drush Command</h2>
	<p class="slide deck-current">Find a drush command that needs to be run.</p>
	<p class="slide deck-next">For testing purposes, we will use drush cc all.</p>
	<div class="slide deck-next code-display">
		<p>#!/bin/bash</p>
		<p>knife search node "chef_environment:production && role:drupal" | grep "Node Name" | sed "s/^.* //"  | sort -r |while read machine</p>
		<p>do</p>
		<p class="lvl1">echo "Machine $machine"</p>
		<p class="lvl1">set -e</p>
		<p class="lvl1">cmd="ssh -n chef@$machine /usr/bin/drush cc all -r /srv/www/html/drupal/current && /usr/bin/drush -r /srv/www/html/drupal/current php-eval 'drupal_flush_all_caches();'"</p>
		<p class="lvl1">echo "$cmd"</p>
		<p class="lvl1">$cmd</p>
		<p class="lvl1">set +e</p>
		<p>done</p>
	</div>
</section>

<section id="jenkins-joblist" class="slide deck-child-current deck-before">
	<h2>Jenkins Dashboard</h2>
	<img class="slide deck-current" src="assets/images/jenkins-jobslist.jpg" />
</section>

<section id="jenkins-newjob" class="slide deck-child-current deck-before">
	<h2>Create a Jenkins Job</h2>
	<img class="slide deck-current" src="assets/images/jenkins-newjob.jpg" />
</section>

<section id="jenkins-configure1" class="slide deck-child-current deck-before">
	<h2>Configure the Jenkins Job</h2>
	<img class="slide deck-current" src="assets/images/jenkins-configure1.jpg" />
</section>

<section id="jenkins-configure2" class="slide deck-child-current deck-before">
	<h2>Configure the Jenkins Job (cont.)</h2>
	<img class="slide deck-current"src="assets/images/jenkins-configure2.jpg" />
</section>

<section id="jenkins-configure3" class="slide deck-child-current deck-before">
	<h2>Configure the Jenkins Job (cont.)</h2>
	<img class="slide deck-current"src="assets/images/jenkins-configure3.jpg" />
</section>

<section id="jenkins-build" class="slide deck-child-current deck-before">
	<h2>Build</h2>
	<img class="slide deck-current"src="assets/images/jenkins-build.jpg" />
</section>

<section id="jenkins-buildoutput" class="slide deck-child-current deck-before">
	<h2>Build Output</h2>
	<img class="slide deck-current"src="assets/images/jenkins-buildoutput.jpg" />
	<p class="slide deck-next"><a href="assets/build_output.html" target="_blank">A closer look.</a></p>
</section>

<section id="jenkins-jobconnection" class="slide deck-child-current deck-before">
	<h2>Jenkins Job List: Recognize the Connection</h2>
	<img class="slide deck-current" src="assets/images/jenkins-jobslist.jpg" />
</section>

<section id="our-goal" class="slide deck-child-current">
	<h2>Next Steps</h2>
	<div class="slide deck-current">
		<p>As mentioned before, the goal of this presentation is to spark a conversation in the community that will lead to a collaborative solution for some of the problems many of us face.</p>
		<img src="assets/images/critical-thinking.jpg" />
		<img src="assets/images/collaboration1.jpg" />
	</div>
</section>

<section id="your-solution" class="slide deck-child-current">
	<h2>This is okay too...</h2>
	<div class="slide deck-current">
		<img src="assets/images/noob.jpg" />
		<img src="assets/images/noob-star-wars.jpg" />
		<p>Tell us how to do it better. We are open to any suggestion or criticism, but we expect you to contribute to a workable, acceptable solution!</p>
	</div>
</section>

<section id="lets-talk" class="slide deck-child-current">
	<h2>Let's Talk</h2>
	<p class="slide deck-current">Thank You!</p>
</section>


<!-- End slides. -->


<!-- Begin extension snippets. Add or remove as needed. -->

<!-- deck.navigation snippet -->
<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<!-- deck.status snippet -->
<p class="deck-status">
	<span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span>
</p>

<!-- End extension snippets. -->


<!-- Required JS files. -->
<script src="jquery-1.7.2.min.js"></script>
<script src="core/deck.core.js"></script>

<!-- Extension JS files. Add or remove as needed. -->
<script src="extensions/status/deck.status.js"></script>
<script src="extensions/navigation/deck.navigation.js"></script>
<script src="extensions/scale/deck.scale.js"></script>

<!-- Initialize the deck. You can put this in an external file if desired. -->
<script>
	$(function() {
		$.deck('.slide');
	});
</script>
</body>
</html>
